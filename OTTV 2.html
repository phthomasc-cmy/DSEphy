
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OTTV Building Designer üè¢</title>
    <style>
        :root {
            --primary: #4FACFE;
            --secondary: #00F2FE;
            --concrete: #95a5a6;
            --glass: #aed6f1;
            --roof: #e67e22;
            --ground: #27ae60;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: #333;
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .container {
            max-width: 900px;
            width: 100%;
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
        }

        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 10px;
        }

        p.subtitle {
            text-align: center;
            color: #7f8c8d;
            margin-bottom: 30px;
        }

        /* FLEX LAYOUT FOR SIMULATOR */
        .sim-layout {
            display: flex;
            flex-wrap: wrap;
            gap: 40px;
            justify-content: center;
            align-items: flex-start;
        }

        /* LEFT SIDE: THE BUILDING VISUALIZATION */
        .scene {
            position: relative;
            width: 300px;
            height: 400px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-end;
        }

        .sun {
            position: absolute;
            top: -20px;
            right: -20px;
            font-size: 80px;
            animation: spin 20s linear infinite;
            z-index: 10;
        }

        @keyframes spin { 100% { transform: rotate(360deg); } }

        .building {
            width: 240px;
            display: flex;
            flex-direction: column;
            border-bottom: 10px solid #7f8c8d; /* Foundation */
        }

        .roof-top {
            width: 260px;
            height: 20px;
            background-color: var(--roof);
            margin-left: -10px; /* Center relative to building */
            border-radius: 5px 5px 0 0;
        }

        /* FLOORS */
        .floor {
            height: 100px;
            width: 100%;
            background-color: var(--concrete);
            border: 2px solid #7f8c8d;
            box-sizing: border-box;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
            transition: background-color 0.5s; /* Smooth heat color transition */
        }

        /* THE WINDOW */
        .window-pane {
            height: 70%; /* Window doesn't touch floor/ceiling */
            width: 30%; /* Starting width */
            background: linear-gradient(135deg, rgba(255,255,255,0.8) 0%, rgba(174, 214, 241, 0.9) 100%);
            border: 2px solid #3498db;
            box-shadow: inset 0 0 10px rgba(255,255,255,0.5);
            transition: width 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            position: relative;
        }

        /* Reflection lines on glass */
        .window-pane::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, transparent 40%, rgba(255,255,255,0.4) 45%, transparent 50%);
        }

        /* Heat Arrows (Hidden by default, shown via JS logic if needed, or simply implied by color) */
        .heat-overlay {
            position: absolute;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 0, 0, 0);
            pointer-events: none;
            transition: background-color 0.5s;
            z-index: 1;
        }

        /* RIGHT SIDE: CONTROLS & MATH */
        .controls-panel {
            flex: 1;
            min-width: 300px;
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            border: 1px solid #e1e1e1;
        }

        .control-group {
            margin-bottom: 25px;
        }

        label {
            font-weight: bold;
            display: block;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        input[type=range] {
            width: 100%;
            height: 10px;
            border-radius: 5px;
            background: #d3d3d3;
            outline: none;
            -webkit-appearance: none;
        }

        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            background: var(--primary);
            cursor: pointer;
            border: 2px solid white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        .stats-box {
            background: #2c3e50;
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .score-big {
            font-size: 3.5em;
            font-weight: 800;
            color: var(--secondary);
            text-shadow: 0 0 10px rgba(79, 172, 254, 0.5);
            margin: 10px 0;
        }

        .explanation {
            margin-top: 20px;
            font-size: 0.9em;
            background: #e8f6f3;
            color: #0e6251;
            padding: 15px;
            border-radius: 8px;
            border-left: 5px solid #2ecc71;
        }

        .formula-display {
            font-family: 'Courier New', Courier, monospace;
            background: #eee;
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
            font-weight: bold;
        }

        /* Responsive Text */
        .status-text {
            font-size: 1.2em;
            font-weight: bold;
        }

    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>üè¢ Interactive OTTV Designer</h1>
        <p class="subtitle">Design the facade of this 3-story building. Adjust the window size to see how it affects heat transfer!</p>
    </header>

    <div class="sim-layout">
        
        <!-- VISUAL SIDE -->
        <div class="scene">
            <div class="sun">‚òÄÔ∏è</div>
            
            <div class="roof-top"></div>
            
            <div class="building" id="building-core">
                <!-- 3rd Floor -->
                <div class="floor">
                    <div class="heat-overlay"></div>
                    <div class="window-pane"></div>
                </div>
                <!-- 2nd Floor -->
                <div class="floor">
                    <div class="heat-overlay"></div>
                    <div class="window-pane"></div>
                </div>
                <!-- 1st Floor -->
                <div class="floor">
                    <div class="heat-overlay"></div>
                    <div class="window-pane"></div>
                </div>
            </div>
            <div style="margin-top:5px; color:#7f8c8d; font-size:0.8em; font-weight:bold;">Cross Section View</div>
        </div>

        <!-- CONTROL SIDE -->
        <div class="controls-panel">
            
            <div class="control-group">
                <label for="ratio-slider">ü™ü Window Size (WWR): <span id="ratio-display">30</span>%</label>
                <input type="range" id="ratio-slider" min="0" max="100" value="30">
                <div style="display:flex; justify-content:space-between; font-size:0.8em; color:#666; margin-top:5px;">
                    <span>0% (Bunker)</span>
                    <span>100% (Glass Box)</span>
                </div>
            </div>

            <div class="stats-box">
                <div>Calculated OTTV Score</div>
                <div class="score-big" id="ottv-score">--</div>
                <div class="status-text" id="status-msg">Loading...</div>
            </div>

            <div class="explanation">
                <strong>üìù How it works:</strong>
                <div class="formula-display">
                    OTTV ‚âà (WallArea √ó 15) + (WindowArea √ó 200)
                </div>
                <p>
                    <strong>Walls</strong> allow heat in slowly (Conduction: ~15 W/m¬≤).<br>
                    <strong>Windows</strong> allow heat in fast (Radiation: ~200 W/m¬≤).
                </p>
                <p>Increasing the window area drastically increases the OTTV!</p>
            </div>

        </div>
    </div>
</div>

<script>
    const slider = document.getElementById('ratio-slider');
    const ratioDisplay = document.getElementById('ratio-display');
    const ottvScore = document.getElementById('ottv-score');
    const statusMsg = document.getElementById('status-msg');
    
    // Select all window panes in the building
    const windows = document.querySelectorAll('.window-pane');
    const heatOverlays = document.querySelectorAll('.heat-overlay');

    // Constants for Math (Simplified for educational clarity)
    // Unit: Watts per square meter (W/m2)
    const HEAT_FACTOR_WALL = 15;   // Conduction
    const HEAT_FACTOR_GLASS = 200; // Radiation + Conduction

    function updateBuilding() {
        // 1. Get User Input
        const percentage = parseInt(slider.value);
        ratioDisplay.textContent = percentage;

        // 2. Update Visuals (Building CSS)
        // Change width of the blue window div
        windows.forEach(win => {
            win.style.width = percentage + "%";
            // If 0%, hide border to look like solid wall
            win.style.border = percentage === 0 ? "none" : "2px solid #3498db";
        });

        // 3. Perform Math
        // Let's assume a total facade area of 100 units to make percentages easy
        const areaGlass = percentage; 
        const areaWall = 100 - percentage;

        const totalHeat = (areaWall * HEAT_FACTOR_WALL) + (areaGlass * HEAT_FACTOR_GLASS);
        const totalArea = 100;
        
        const resultOTTV = totalHeat / totalArea;

        // 4. Update Score Display
        ottvScore.textContent = resultOTTV.toFixed(1);

        // 5. Update Status and "Heat Color"
        // We simulate heat inside the building by changing the overlay opacity/color
        
        let status = "";
        let statusColor = "";
        
        // Calculate a "Heat Opacity" between 0 (Cool) and 0.8 (Very Hot)
        // Max OTTV is 200. Min is 15.
        const heatSeverity = (resultOTTV - 15) / (200 - 15); // 0 to 1 scale
        
        if (resultOTTV < 45) {
            status = "‚ùÑÔ∏è Efficient & Cool";
            statusColor = "#43e97b"; // Green
            // Interior looks blue/cool
            heatOverlays.forEach(h => h.style.backgroundColor = "rgba(0, 200, 255, 0.1)");
        } else if (resultOTTV < 90) {
            status = "üòê Getting Warm";
            statusColor = "#f39c12"; // Orange
            // Interior looks yellowish
            heatOverlays.forEach(h => h.style.backgroundColor = `rgba(255, 165, 0, ${heatSeverity * 0.5})`);
        } else {
            status = "ü•µ Super Hot!";
            statusColor = "#e74c3c"; // Red
            // Interior looks red
            heatOverlays.forEach(h => h.style.backgroundColor = `rgba(255, 0, 0, ${heatSeverity * 0.6})`);
        }

        statusMsg.textContent = status;
        statusMsg.style.color = statusColor;
        ottvScore.style.color = statusColor;
    }

    // Event Listener for dragging the slider
    slider.addEventListener('input', updateBuilding);

    // Initialize on load
    updateBuilding();

</script>

</body>
</html>